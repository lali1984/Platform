–ù–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è **–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏**, **–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**, –∞ —Ç–∞–∫–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ **DDD**, **—á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** –∏ **event-driven –ø–æ–¥—Ö–æ–¥–∞ —Å Kafka**, –º–æ–∂–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –∏ —É—Å–∏–ª–∏–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º best practices.

---

## üéØ –¶–µ–ª–∏ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

1. **–ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** –ø–æ —É—Ä–æ–≤–Ω—è–º (Clean Architecture) –∏ –¥–æ–º–µ–Ω–Ω—ã–º –≥—Ä–∞–Ω–∏—Ü–∞–º (Bounded Context).
2. **–ù–∞–¥—ë–∂–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π** —á–µ—Ä–µ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω **Outbox**.
3. **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º** ‚Äî DLQ, Circuit Breaker, retry-–ª–æ–≥–∏–∫–∞.
4. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–π Kafka, –∏–∑–æ–ª—è—Ü–∏—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.
5. **–≠–≤–æ–ª—é—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚Äî Schema Registry –∏ —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π.
6. **–ò–∑–±–µ–≥–∞–Ω–∏–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤**: —Å–º–µ—à–µ–Ω–∏–µ –¥–æ–º–µ–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Kafka –∫–∞–∫ –ë–î, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ACL.

---



## üîç –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 1. **–ü–∞—Ç—Ç–µ—Ä–Ω Outbox**
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å (`auth`, `user`) —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–≤–æ–µ–π –ë–î —Ç–∞–±–ª–∏—Ü—É `outbox`.
- –í—Å–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —ç—Ç—É —Ç–∞–±–ª–∏—Ü—É **–≤ —Ä–∞–º–∫–∞—Ö —Ç–æ–π –∂–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**, —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
- –û—Ç–¥–µ–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å `06_event-relay` –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤—Å–µ `outbox`-—Ç–∞–±–ª–∏—Ü—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ Kafka.
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç **–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** –∏ **–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å** –¥–æ—Å—Ç–∞–≤–∫–∏.

### 2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π**
- –í–Ω—É—Ç—Ä–∏ `domain/` ‚Äî —Ç–æ–ª—å–∫–æ **–¥–æ–º–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è** (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è).
- –í `integration-events/` ‚Äî **–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è**, —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ–º—ã–µ –≤ Kafka.
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫—É –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –º–æ–¥–µ–ª–∏ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å API –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**
- –í—Å–µ Kafka-–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç:
  - **Retry —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π**
  - **Circuit Breaker** (—á–µ—Ä–µ–∑ Resilience4j –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
  - **DLQ** ‚Äî –Ω–µ–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–æ–ø–∏–∫.
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å `07_alerts-and-dlq` –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç DLQ –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É.

### 4. **Schema Registry –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è**
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ–ø–∏—Å–∞–Ω—ã –≤ `shared-messaging/schema/events/`.
- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–∏—Å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å—Ö–µ–º—É –≤ Confluent Schema Registry.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ `BACKWARD`.
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "—Å–ª–æ–º–∞–Ω–Ω—ã–µ" –¥–µ–ø–ª–æ–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–±—ã—Ç–∏–π.

### 5. **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–æ–≤**
- –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ `domain`, `application`, `infrastructure`, `presentation`.
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã **–≤–Ω—É—Ç—Ä—å** (Domain –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Infrastructure).
- –ü–æ—Ä—Ç—ã –∏ –∞–¥–∞–ø—Ç–µ—Ä—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –≥–∏–±–∫–æ—Å—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å.

### 6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å**
- –í `shared-monitoring` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞:
  - **Distributed tracing** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Jaeger/OpenTelemetry) –¥–ª—è Kafka-—Å–æ–æ–±—â–µ–Ω–∏–π.
  - **–ú–µ—Ç—Ä–∏–∫–∏ –ª–∞–≥–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π**.
  - **–ê–ª–µ—Ä—Ç—ã –Ω–∞ DLQ –∏ rebalance**.

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

| –ê—Å–ø–µ–∫—Ç | –î–æ | –ü–æ—Å–ª–µ |
|-------|----|--------|
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | –ù–µ–æ—á–µ–≤–∏–¥–Ω–∞, –Ω–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ | –Ø–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π |
| **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç DLQ, –Ω–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–±–æ–µ–≤ | DLQ + Circuit Breaker + Retry |
| **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** | –†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ —Å–±–æ–µ | –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ Outbox |
| **–≠–≤–æ–ª—é—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã** | –°–ª–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å–æ–±—ã—Ç–∏—è | –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —ç–≤–æ–ª—é—Ü–∏—è —á–µ—Ä–µ–∑ Schema Registry |
| **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** | –°–º–µ—à–µ–Ω–∏–µ —Å–ª–æ—ë–≤, –Ω–µ—Ç —á—ë—Ç–∫–∏—Ö –≥—Ä–∞–Ω–∏—Ü | –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ + DDD |

---

## üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é

1. **–ü–æ—ç—Ç–∞–ø–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**: –Ω–∞—á–∞—Ç—å —Å `auth-service` ‚Üí –¥–æ–±–∞–≤–∏—Ç—å outbox ‚Üí –≤—ã–Ω–µ—Å—Ç–∏ —Ä–µ–ª–µ–π.
2. **–î–æ–±–∞–≤–∏—Ç—å ADR**: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ö–µ–º**: CI –¥–æ–ª–∂–µ–Ω –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π.
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Kafka-–∞–ª–µ—Ä—Ç—ã**: –ª–∞–≥ > N, —á–∞—Å—Ç—ã–µ rebalance, —Ä–æ—Å—Ç DLQ.
5. **–ü—Ä–æ–≤–µ—Å—Ç–∏ chaos-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –∏–º–∏—Ç–∞—Ü–∏—è —Å–±–æ–µ–≤ Kafka, –±–∞–∑—ã, —Å–µ—Ç–∏.

---

–¢–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É **–≥–æ—Ç–æ–≤–æ–π –∫ —Ä–æ—Å—Ç—É**, **—É—Å—Ç–æ–π—á–∏–≤–æ–π –∫ —Å–±–æ—è–º** –∏ **—É–¥–æ–±–Ω–æ–π –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**, –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é –ø—Ä–∏–Ω—Ü–∏–ø–∞–º DDD, Clean Architecture –∏ Event-Driven Design.