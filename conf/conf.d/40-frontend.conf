# ==================== FRONTEND ====================
location / {
    proxy_pass http://frontend;
    include /etc/nginx/proxy_params;
    
    # WebSocket поддержка
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    
    # Таймауты для WebSocket
    # proxy_read_timeout 3600s;
    # proxy_send_timeout 3600s;
    
    # Кэширование статики
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        proxy_cache api_cache;
        proxy_cache_valid 200 1h;
        proxy_cache_key "$scheme$proxy_host$request_uri";
        add_header X-Cache-Status $upstream_cache_status always;
        add_header Cache-Control "public, max-age=3600";
    }
}